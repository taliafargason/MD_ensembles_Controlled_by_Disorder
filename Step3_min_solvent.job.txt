#!/bin/bash
#SBATCH --partition=pascalnodes
#SBATCH --job-name=SRSF1-Solv-Min
#SBATCH --error=SRSF1-Solv-Min.err
#SBATCH --output=SRSF1-Solv-Min.out
#SBATCH --gres=gpu:1
#SBATCH --mem-per-cpu=5G
#SBATCH --time=12:00:00
#SBATCH --mail-type=ALL
#SBATCH --mail-user=tfarg@uab.edu

module reset
module load OpenMPI/4.1.5-GCC-12.3.0 
module load Amber/20.11-fosscuda-2020b-AmberTools-21.3 
module load CUDA/11.6.0

# Loop through protein numbers from 1 to 30
for ((i = 1; i <= 30; i++)); do
    pmemd.cuda -O -i min-solvent.in -p SRSF1_SolvI_CMAP_${i}.prmtop -c SRSF1-SolvI_${i}.inpcrd -ref SRSF1-SolvI_${i}.inpcrd -o min-solvent_${i}.out -r SRSF1-min-SolvI_${i}.rst -x SRSF1-min-SolvI_${i}.mdcrd -inf SRSF1-min-SolvI_${i}.mdinfo
    ambpdb -p SRSF1-SolvI_${i}.prmtop -c SRSF1-min-SolvI_${i}.rst > SRSF1-min-SolvI_${i}.pdb
done
